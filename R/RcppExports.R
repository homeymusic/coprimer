# Generated by using Rcpp::compileAttributes() -> do not edit by hand
# Generator token: 10BE3573-1514-4C36-9D1C-5A225CD40393

#' stern_brocot_tree
#'
#' Generate the Stern-Brocot tree up to a given depth using `std::list`.
#'
#' @param x The depth of the tree to generate.
#'
#' @return A data frame containing:
#'   - `num`: Numerator of the fraction.
#'   - `den`: Denominator of the fraction.
#'   - `depth`: The depth level in the Stern-Brocot tree.
#'
stern_brocot_tree <- function(x) {
    .Call(`_coprimer_stern_brocot_tree`, x)
}

#' first_coprime
#'
#' Approximate a real number as a coprime rational fraction using the Stern-Brocot tree
#'
#' @param x A numeric vector of values to approximate as fractions.
#' @param lower_uncertainty A numeric vector (or scalar) specifying the lower uncertainty bound.
#' @param upper_uncertainty A numeric vector (or scalar) specifying the upper uncertainty bound.
#'
#' @return A data frame with the following columns:
#'   - `num`: The numerator of the approximated fraction (an integer).
#'   - `den`: The denominator of the approximated fraction (a natural number > 0).
#'   - `approximation`: The value of the fraction `num / den`.
#'   - `error`: The difference between the approximation and the original value of `x`.
#'   - `depth`: The depth of the Stern-Brocot tree traversal.
#'   - `path`: The path taken in the Stern-Brocot tree as a string of 'L' (left) and 'R' (right).
#'   - `x`: The original value of `x`.
#'   - `lower_uncertainty`: The lower uncertainty.
#'   - `upper_uncertainty`: The upper uncertainty.
#'   - `valid_min`: The lower bound of the uncertainty range (`x - lower_uncertainty`).
#'   - `valid_max`: The upper bound of the uncertainty range (`x + upper_uncertainty`).
#'
first_coprime <- function(x, lower_uncertainty, upper_uncertainty) {
    .Call(`_coprimer_first_coprime`, x, lower_uncertainty, upper_uncertainty)
}

#' Find the nearest coprime fraction within uncertainty bounds
#'
#' This function finds the best rational approximation (coprime fraction) to a given value `x`
#' while considering a specified lower and upper uncertainty range. It computes two coprime
#' fractions: one using the lower uncertainty and one using the upper uncertainty, and returns
#' the one closest to `x`.
#'
#' @param x A numeric vector of values for which to find the nearest coprime fraction.
#' @param lower_uncertainty A numeric vector or scalar specifying the lower uncertainty range.
#'   If scalar, it is applied to all `x` values.
#' @param upper_uncertainty A numeric vector or scalar specifying the upper uncertainty range.
#'   If scalar, it is applied to all `x` values.
#'
#' @return A data frame containing:
#'   - `num`: The numerator of the coprime fraction.
#'   - `den`: The denominator of the coprime fraction.
#'   - `approximation`: The computed fraction closest to `x`.
#'   - `x`: The original input value(s).
#'   - `error`: The difference between `approximation` and `x`.
#'   - `depth`: The depth of the Stern-Brocot tree used to find the fraction.
#'   - `path`: The Stern-Brocot path to the selected fraction.
#'   - `lower_uncertainty`: The effective lower uncertainty used.
#'   - `upper_uncertainty`: The effective upper uncertainty used.
#'   - `valid_min`: The minimum valid range (`x - lower_uncertainty`).
#'   - `valid_max`: The maximum valid range (`x + upper_uncertainty`).
#'
#' @details
#' The function computes two rational approximations: one using `x - lower_uncertainty` and one
#' using `x + upper_uncertainty`. The fraction whose approximation is closest to `x` is selected.
#' If `lower_uncertainty` or `upper_uncertainty` is a scalar, it is expanded to match the length
#' of `x`. If their lengths are inconsistent, an error is thrown.
#'
#' @examples
#' nearby_coprime(0.2, 0.01, 0.1)
#' nearby_coprime(c(0.2, 0.3), 0.01, c(0.05, 0.1))
#'
nearby_coprime <- function(x, lower_uncertainty, upper_uncertainty) {
    .Call(`_coprimer_nearby_coprime`, x, lower_uncertainty, upper_uncertainty)
}

